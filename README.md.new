# ğŸ› ï¸ Turbotilt : CLI pour environnements dev cloud-native

> **Initialisation, lancement et diagnostic d'environnements de dÃ©veloppement** pour projets Java (Spring Boot, Quarkus, Micronautâ€¦), avec support de Tilt pour le live reload.

![status-badge](https://img.shields.io/badge/status-beta-orange)

---

## âœ¨ FonctionnalitÃ©s

| FonctionnalitÃ©                                                            | Description                                                             |
| ------------------------------------------------------------------------- | ----------------------------------------------------------------------- |
| ğŸ” **DÃ©tection automatique** des frameworks Java (Maven/Gradle)           | Analyse des fichiers `pom.xml` & `build.gradle` et de la structure      |
| ğŸ³ **GÃ©nÃ©ration dynamique** de Dockerfile adaptÃ© au framework dÃ©tectÃ©     | CrÃ©e un Dockerfile optimisÃ© pour Spring, Quarkus ou Micronaut           |
| ğŸ§© **Docker Compose intÃ©grÃ©** avec dÃ©tection des services dÃ©pendants      | DÃ©tecte et configure automatiquement MySQL, PostgreSQL, Redis, etc.     |
| âš¡ **Support de Tilt** pour le live-reload                                | GÃ©nÃ¨re un Tiltfile avec rÃ¨gles live-update adaptÃ©es au framework        |
| ğŸ¥ **Diagnostic avancÃ©** (doctor)                                         | VÃ©rifie l'installation, l'environnement et gÃ©nÃ¨re un score de santÃ©     |
| ğŸ”§ **Configuration flexible**                                             | Configuration par fichier YAML et flags en ligne de commande             |

---

## ğŸ“¦ Structure du projet

```
turbotilt/
â”œâ”€â”€ cmd/                  # point d'entrÃ©e CLI (cobra)
â”‚   â”œâ”€â”€ root.go
â”‚   â”œâ”€â”€ init.go          # turbotilt init
â”‚   â”œâ”€â”€ up.go            # turbotilt up
â”‚   â”œâ”€â”€ doctor.go        # turbotilt doctor
â”‚   â””â”€â”€ ...
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ scan/            # dÃ©tection frameworks et services
â”‚   â”œâ”€â”€ render/          # gÃ©nÃ©ration des fichiers Docker, etc.
â”‚   â””â”€â”€ runtime/         # exÃ©cution avec Tilt ou Docker Compose
â”œâ”€â”€ templates/           # templates pour Tiltfile et autres
â”‚   â””â”€â”€ Tiltfile.tmpl    # template de base pour Tiltfile
â”œâ”€â”€ go.mod               # dÃ©pendances Go
â””â”€â”€ README.md            # documentation
```

---

## ğŸš€ DÃ©marrage rapide

### Installation

```bash
# Cloner le repository
git clone https://github.com/votre-nom/turbotilt.git
cd turbotilt

# Compiler l'application
go build

# CrÃ©er un lien symbolique (optionnel)
# sudo ln -s $(pwd)/turbotilt /usr/local/bin/turbotilt
```

### Utilisation

```bash
# Initialiser un projet (auto-dÃ©tection du framework)
turbotilt init

# Options disponibles
turbotilt init --framework spring --port 8080 --jdk 17 --dev

# DÃ©marrer l'environnement avec Tilt
turbotilt up

# DÃ©marrer avec Docker Compose uniquement (sans Tilt)
turbotilt up --tilt=false

# VÃ©rifier l'environnement et la configuration
turbotilt doctor

# VÃ©rification dÃ©taillÃ©e
turbotilt doctor --verbose --log

# ArrÃªter l'environnement et nettoyer
turbotilt stop
```

---

## ğŸ” Comment Ã§a fonctionne

1. **Phase de scan** - DÃ©tection du framework et des services dÃ©pendants
2. **GÃ©nÃ©ration des fichiers** - CrÃ©ation de Dockerfile, docker-compose.yml et Tiltfile
3. **DÃ©marrage de l'environnement** - ExÃ©cution via Tilt ou Docker Compose
4. **Surveillance du code** - Live reload avec Tilt (pour un dÃ©veloppement rapide)

---

## âš™ï¸ Configuration

Turbotilt peut Ãªtre configurÃ© via:

1. **Flags en ligne de commande** - Pour les rÃ©glages rapides
2. **Fichier turbotilt.yml** - Pour une configuration persistante du projet

Exemple de `turbotilt.yml`:

```yaml
framework: spring
port: 8080
jdk: "17"
dev_mode: true
services:
  - type: mysql
    version: "8.0"
    credentials:
      username: root
      password: example
```

---

## ğŸ§© Frameworks supportÃ©s

- **Spring Boot** - DÃ©tection automatique via pom.xml ou build.gradle
- **Quarkus** - Support complet avec live-reload
- **Micronaut** - Support basique

## ğŸ›¢ï¸ Services dÃ©pendants supportÃ©s

- **Bases de donnÃ©es** - MySQL, PostgreSQL, MongoDB
- **Cache** - Redis
- **Messagerie** - Kafka, RabbitMQ
- **Autres** - Elasticsearch

---

## ğŸ¤ Contribution

Les contributions sont les bienvenues ! N'hÃ©sitez pas Ã  ouvrir des issues ou des pull requests.

## ğŸ“„ Licence

MIT
